<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Test de Ajedrez</title>
<style>
body{
  font-family:Arial, sans-serif;
  background:#f2f2f2;
}
.container{
  max-width:800px;
  margin:40px auto;
  background:white;
  padding:25px;
  border-radius:12px;
  box-shadow:0 0 10px rgba(0,0,0,0.2);
}
h1{text-align:center;}
#timer{
  text-align:center;
  font-size:22px;
  margin-bottom:15px;
}
img{
  width:100%;
  max-height:350px;
  object-fit:contain;
}
.option{
  background:#e6e6e6;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
  cursor:pointer;
}
.option:hover{background:#d0d0d0;}
.selected{background:#a6d3ff;}
button{
  padding:10px 18px;
  margin-top:15px;
}
.hidden{display:none;}
</style>
</head>
<body>

<div class="container">
<h1>Test de Ajedrez</h1>
<div id="timer">20:00</div>

<!-- PANTALLA INICIO -->
<div id="startScreen">
<p>Nombre del estudiante:</p>
<input type="text" id="studentName">
<br><br>
<button onclick="startQuiz()">Comenzar</button>
</div>

<!-- PANTALLA TEST -->
<div id="quizScreen" class="hidden">
<h3 id="questionNumber"></h3>
<img id="questionImage">
<p id="questionText"></p>
<div id="options"></div>
<button onclick="nextQuestion()">Siguiente</button>
</div>

<!-- RESULTADOS -->
<div id="resultScreen" class="hidden">
<h2>Resultados</h2>
<p id="finalName"></p>
<p id="finalScore"></p>
<p id="finalLevel"></p>
<p style="margin-top:10px;font-weight:bold;">Seleccione todo el texto del resultado, copie, pegue y envíe al siguiente correo electrónico: quizacademiamillennials@gmail.com</p>

<h3>Estadística por pregunta</h3>
<div id="review"></div>
</div>
</div>
</div>

<script>

/************************************************
 EDITA MANUALMENTE CADA PREGUNTA AQUÍ
*************************************************/

const questions = [

{
  image:"img/p1.png",
  text:"1. ¿En esta posición qué debe hacer el blanco?",
  options:[
    "1. Ganar material",
    "2. Dar mate en un movimiento",
    "3. Defender",
    "4. Son tablas por ahogado"
  ],
  correct:2
},

{
  image:"img/p2.png",
  text:"2. En esta posición ¿Qué debe hacer el blanco?",
  options:[
    "1. Ganar material",
    "2. Dar mate en un movimiento",
    "3. Defender",
    "4. Son tablas por ahogado"
  ],
  correct:2
},

{
  image:"img/p3.png",
  text:"3. ¿En esta posición qué debe hacer el blanco?",
  options:[
    "1. Ganar material",
    "2. Dar mate en un movimiento",
    "3. Defender",
    "4. Son tablas por ahogado"
  ],
  correct:2
},

{
  image:"img/p4.png",
  text:"4. ¿En esta posición qué debe hacer el negro?",
  options:[
    "1. Ganar material",
    "2. Dar mate en un movimiento",
    "3. Defender",
    "4. Son tablas por ahogado"
  ],
  correct:0
},

{
  image:"img/p5.png",
  text:"5. ¿En esta posición qué debe hacer el blanco?",
  options:[
    "1. Ganar material",
    "2. Dar mate en un movimiento",
    "3. Defender",
    "4. Son tablas por ahogado"
  ],
  correct:3
},

{
  image:"img/p6.png",
  text:"6. ¿En esta posición qué debe hacer el blanco?",
  options:[
    "A) Avanzar el peón 1. h7",
    "B) No permitir que el rey negro ataque el peón blanco 1. Rh5",
    "C) No permitir que el rey negro penetre en el campo blanco 1. Rf4",
    "D) Nada, porque el rey negro capturará el peón."
  ],
  correct:1
},

{
  image:"img/p7.png",
  text:"7. ¿En esta posición qué debe hacer el negro?",
  options:[
    "1. Ganar material",
    "2. Dar mate en un movimiento",
    "3. Defender",
    "4. Son tablas por ahogado"
  ],
  correct:0
},

{
  image:"img/p8.png",
  text:"8. ¿En esta posición qué debe hacer el blanco?",
  options:[
    "A) Ganar material con 1. Axc1",
    "B) Ganar material con 1. Axa3",
    "C) Defender",
    "D) Son tablas por ahogado"
  ],
  correct:0
},

{
  image:"img/p9.png",
  text:"9. ¿En esta posición qué debe hacer el negro?",
  options:[
    "A) Ganar material con 1. Dxg5",
    "B) Ganar material con 1. Txg5",
    "C) Escapar con la dama 1. Dh6",
    "D) Atacar el caballo con 1. f5"
  ],
  correct:1
},

{
  image:"img/p10.png",
  text:"10. En esta posición ¿Qué debe hacer el negro?",
  options:[
    "A. Ganar material",
    "B. Dar mate en un movimiento",
    "C. Defender",
    "D. Son tablas por ahogado"
  ],
  correct:3
},

{
  image:"img/p11.png",
  text:"11. ¿En esta posición qué debe hacer el blanco?",
  options:[
    "A. Ganar material",
    "B. Dar mate en un movimiento",
    "C. Defender",
    "D. Son tablas por ahogado"
  ],
  correct:1
},

{
  image:"img/p12.png",
  text:"12. ¿En esta posición qué debe hacer el blanco?",
  options:[
    "A. Ganar material",
    "B. Dar mate en un movimiento",
    "C. Defender",
    "D. Son tablas por ahogado"
  ],
  correct:1
},

{
  image:"img/p13.png",
  text:"13. ¿En esta posición qué debe hacer el blanco?",
  options:[
    "A. Ganar material",
    "B. Dar mate en un movimiento",
    "C. Defender",
    "D. Son tablas por ahogado"
  ],
  correct:3
},

{
  image:"img/p14.png",
  text:"14. ¿En esta posición qué debe hacer el blanco?",
  options:[
    "A) Ganar material",
    "B) Dar mate en un movimiento",
    "C) Defender",
    "D) Son tablas por ahogado."
  ],
  correct:1
},

{
  image:"img/p15.png",
  text:"15. ¿En esta posición qué debe hacer el negro?",
  options:[
    "A. Ganar material",
    "B. Dar mate en un movimiento",
    "C. Defender",
    "D. Son tablas por ahogado"
  ],
  correct:2
}

// AGREGA MÁS PREGUNTAS COPIANDO ESTE BLOQUE

];

/************************************************/

let currentQuestion = 0;
let answers = [];
let time = 1200; // 20 minutos
let timer;
let student = "";

function startQuiz(){
  student = document.getElementById("studentName").value;
  if(student === ""){
    alert("Ingrese su nombre");
    return;
  }
  document.getElementById("startScreen").classList.add("hidden");
  document.getElementById("quizScreen").classList.remove("hidden");
  startTimer();
  loadQuestion();
}

function startTimer(){
  timer = setInterval(() => {
    time--;
    let m = Math.floor(time/60);
    let s = time % 60;
    document.getElementById("timer").innerText =
      `${m}:${s.toString().padStart(2,'0')}`;
    if(time <= 0) finishQuiz();
  },1000);
}

function loadQuestion(){
  let q = questions[currentQuestion];
  document.getElementById("questionNumber").innerText =
    `Pregunta ${currentQuestion+1} de ${questions.length}`;
  document.getElementById("questionImage").src = q.image;
  document.getElementById("questionText").innerText = q.text;

  let optDiv = document.getElementById("options");
  optDiv.innerHTML = "";

  q.options.forEach((opt,i)=>{
    let div = document.createElement("div");
    div.className = "option";
    div.innerText = opt;
    div.onclick = () => selectOption(i,div);
    optDiv.appendChild(div);
  });
}

function selectOption(i,el){
  document.querySelectorAll('.option')
    .forEach(o=>o.classList.remove('selected'));
  el.classList.add('selected');
  answers[currentQuestion] = i;
}

function nextQuestion(){
  if(answers[currentQuestion] == null){
    alert("Seleccione una respuesta");
    return;
  }
  currentQuestion++;
  if(currentQuestion >= questions.length){
    finishQuiz();
  } else {
    loadQuestion();
  }
}

function finishQuiz(){
  clearInterval(timer);

  let score = 0;
  questions.forEach((q,i)=>{
    if(q.correct === answers[i]) score++;
  });

  let level = "";
  if(score <= 5) level = "Necesitas empezar nuestro curso desde 0";
  else if(score <= 9) level = "Lo hiciste bien pero hace falta hacer nuestro curso para mejorar";
  else if(score <= 12) level = "Excelente, ya casi superas los 1100. Haz el curso para afianzar conocimientos";
  else level = "Ya estás en otro nivel";

  document.getElementById("quizScreen").classList.add("hidden");
  document.getElementById("resultScreen").classList.remove("hidden");

  document.getElementById("finalName").innerText = "Nombre: " + student;
  document.getElementById("finalScore").innerText =
    `Puntaje: ${score} / ${questions.length}`;
  document.getElementById("finalLevel").innerText = "Nivel: " + level;

  // Estadística por pregunta
  let review = document.getElementById("review");
  review.innerHTML = "";

  let emailBody = `Nombre: ${student}
Puntaje: ${score}/${questions.length}
Nivel: ${level}

`;

  questions.forEach((q,i)=>{
    let correcta = q.correct === answers[i];

    let p = document.createElement("p");
    p.textContent = `Pregunta ${i+1}: ${correcta ? "Correcta" : "Incorrecta"}`;
    p.style.color = correcta ? "green" : "red";
    review.appendChild(p);

    emailBody += `Pregunta ${i+1}: ${q.text}
`;
    emailBody += `Respuesta alumno: ${q.options[answers[i]]}
`;
    emailBody += `Respuesta correcta: ${q.options[q.correct]}

`;
  });

  // Enviar correo
  let subject = "Resultados Test de Ajedrez";
  window.location.href =
    "mailto:quizacademiamillennials@gmail.com" +
    `?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(emailBody)}`;
}

</script>

</body>
</html>
